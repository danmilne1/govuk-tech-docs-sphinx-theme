<div class="app-pane__toc">
  <div class="toc" data-module="table-of-contents">
    <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>

    {% include "searchbox.html" %}

    <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">

      {# Global table of contents #}
      <ul>
        {%- set nav = get_nav_object(maxdepth=6, collapse=True) -%}
        {%- for main_nav_item in nav recursive -%}
        <li>
          <a href="{{ main_nav_item.url }}"><span>{{ main_nav_item.title }}</span></a>
          {%- if main_nav_item.children -%}
          <ul>{{ loop(main_nav_item.children) }}</ul>
          {%- endif -%}
        </li>
        {%- endfor -%}
      </ul>
      <hr size="1">

      {# Local table of contents #}
      {%- set nav_local = get_page_toc_object() -%}
      {%- if nav_local -%}
      <h2>On this page</h2>

      <ul>
        <li>
          <a href="{{ name }}"><span>{{ title }}</span></a>
          {%- for main_nav_local_item in nav_local recursive -%}
          <ul>
            <li>
              <a href="{{ main_nav_local_item.url }}"><span>{{ main_nav_local_item.title }}</span></a>
              {%- if main_nav_local_item.children -%}
              <ul>{{ loop(main_nav_local_item.children) }}</ul>
              {%- endif -%}
            </li>
          </ul>
          {%- endfor -%}
        </li>
      </ul>
      {%- endif -%}
    </nav>
  </div>
</div>
